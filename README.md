# Post-processing and Result Testing Based on Repomix

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯åŸºäºRepomixçš„åå¤„ç†å’Œç»“æœæµ‹è¯•æ¡†æ¶ï¼Œä¸»è¦ç”¨äºè¯„ä¼°RAGï¼ˆRetrieval-Augmented Generationï¼‰ç³»ç»Ÿåœ¨ä»£ç çŸ¥è¯†åº“é—®ç­”ä»»åŠ¡ä¸Šçš„æ€§èƒ½ã€‚é¡¹ç›®åŒ…å«å®Œæ•´çš„å®éªŒæµç¨‹ï¼Œä»æ•°æ®é¢„å¤„ç†ã€å‘é‡æ•°æ®åº“æ„å»ºã€RAGç³»ç»Ÿè¿è¡Œåˆ°ç»“æœè¯„ä¼°å’Œå¯è§†åŒ–ã€‚

## ç›®å½•ç»“æ„

```
post-processing_and_result-testing/
â”œâ”€â”€ README.md                 # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ requirements.txt          # Pythonä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ evalulate/               # è¯„ä¼°ç³»ç»Ÿæ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ eval.py             # è¯„ä¼°è„šæœ¬
â”‚   â”œâ”€â”€ run.py              # RAGç³»ç»Ÿè¿è¡Œå™¨
â”‚   â”œâ”€â”€ README_RAG_RUNNER.md # RAGè¿è¡Œå™¨è¯¦ç»†è¯´æ˜
â”‚   â”œâ”€â”€ configs/            # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”‚   â””â”€â”€ prompts.py      # æç¤ºè¯é…ç½® ğŸ”
â”‚   â”œâ”€â”€ datasets/           # æ•°æ®é›†ç›®å½•
â”‚   â”‚   â””â”€â”€ issues.json     # è®¾è®¡ç”¨ä¾‹æ•°æ® ğŸ”
â”‚   â”œâ”€â”€ results/            # ç»“æœå­˜å‚¨ç›®å½•
â”‚   â”‚   â”œâ”€â”€ gold_standard/  # æ ‡å‡†ç­”æ¡ˆç›®å½• ğŸ”
â”‚   â”‚   â”œâ”€â”€ based_on_rag/   # RAGè¯„ä¼°ç»“æœ ğŸ”
â”‚   â”‚   â”œâ”€â”€ based_on_gpt/   # GPTè¯„ä¼°ç»“æœ
â”‚   â”‚   â””â”€â”€ charts/         # å¯è§†åŒ–å›¾è¡¨
â”‚   â”‚       â””â”€â”€ based_on_rag/ # RAGç»“æœå›¾è¡¨ ğŸ”
â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ rag/                     # RAGç³»ç»Ÿæ¨¡å—
â”‚   â”œâ”€â”€ build_vector_db.py  # å‘é‡æ•°æ®åº“æ„å»º
â”‚   â”œâ”€â”€ rag_system.py       # RAGç³»ç»Ÿæ ¸å¿ƒ
â”‚   â”œâ”€â”€ obtain_relevant_context.py # ç›¸å…³ä¸Šä¸‹æ–‡è·å–
â”‚   â”œâ”€â”€ README_build_vector_db.md  # å‘é‡æ•°æ®åº“æ„å»ºè¯´æ˜
â”‚   â”œâ”€â”€ vector_dbs/         # å‘é‡æ•°æ®åº“å­˜å‚¨
â”‚   â””â”€â”€ relevant_context/   # ç›¸å…³ä¸Šä¸‹æ–‡ç¼“å­˜
â”œâ”€â”€ repomix_md/             # Repomixç”Ÿæˆçš„Markdownæ–‡ä»¶
â””â”€â”€ scripts/                # è¾…åŠ©è„šæœ¬
    â”œâ”€â”€ README.md           # è„šæœ¬è¯´æ˜
    â”œâ”€â”€ add_commit_info.py  # æ·»åŠ æäº¤ä¿¡æ¯
    â””â”€â”€ batch_generate_md.py # æ‰¹é‡ç”ŸæˆMarkdown
```

## ç¯å¢ƒé…ç½®

### 1. åˆ›å»ºCondaè™šæ‹Ÿç¯å¢ƒ

```bash
# åˆ›å»ºåä¸ºrepomindçš„è™šæ‹Ÿç¯å¢ƒï¼ŒæŒ‡å®šPython 3.12ç‰ˆæœ¬
conda create -n repomind python=3.12

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
conda activate repomind
```

### 2. å®‰è£…ä¾èµ–åŒ…

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements.txt
```

### 3. ç¯å¢ƒå˜é‡é…ç½®

åœ¨ `evalulate/` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼Œå‚è€ƒ `.env.example` é…ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼š

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp evalulate/.env.example evalulate/.env

# ç¼–è¾‘ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œé…ç½®APIå¯†é’¥ç­‰
vim evalulate/.env
```

## é‡è¦æ–‡ä»¶æŒ‡å—

### ğŸ“‹ è®¾è®¡ç”¨ä¾‹
- **æ–‡ä»¶ä½ç½®**: `./evalulate/datasets/issues.json`
- **è¯´æ˜**: åŒ…å«æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹çš„é—®é¢˜æè¿°ã€issue urlç­‰ä¿¡æ¯

### ğŸ’¬ æç¤ºè¯é…ç½®
- **æ–‡ä»¶ä½ç½®**: `./evalulate/configs/prompts.py`
- **è¯´æ˜**: å®šä¹‰äº†RAGç³»ç»Ÿä½¿ç”¨çš„å„ç§æç¤ºè¯æ¨¡æ¿

### âœ… æ ‡å‡†ç­”æ¡ˆ
- **æ–‡ä»¶ä½ç½®**: `./evalulate/results/gold_standard/`
- **è¯´æ˜**: åŒ…å«æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„æ ‡å‡†ç­”æ¡ˆï¼Œç”¨äºè¯„ä¼°ç³»ç»Ÿæ€§èƒ½

### ğŸ“Š è¯„ä¼°æŒ‡æ ‡
- **æ–‡ä»¶ä½ç½®**: `./evalulate/results/based_on_rag/`
- **è¯´æ˜**: RAGç³»ç»Ÿçš„è¯„ä¼°ç»“æœï¼ŒåŒ…å«å„ç§æ€§èƒ½æŒ‡æ ‡

### ğŸ“ˆ å¯è§†åŒ–ç»“æœ
- **æ–‡ä»¶ä½ç½®**: `./evalulate/results/charts/based_on_rag/`
- **è¯´æ˜**: è¯„ä¼°ç»“æœçš„å¯è§†åŒ–å›¾è¡¨ï¼Œä¾¿äºåˆ†æç³»ç»Ÿæ€§èƒ½

### ğŸ—„ï¸ å‘é‡æ•°æ®åº“
- **æ–‡ä»¶ä½ç½®**: `./rag/vector_dbs/`
- **è¯´æ˜**: æ„å»ºçš„å‘é‡æ•°æ®åº“æ–‡ä»¶ï¼Œç”¨äºè¯­ä¹‰æ£€ç´¢

### ğŸ“„ ç›¸å…³ä¸Šä¸‹æ–‡
- **æ–‡ä»¶ä½ç½®**: `./rag/relevant_context/`
- **è¯´æ˜**: ç¼“å­˜çš„ç›¸å…³ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæé«˜æ£€ç´¢æ•ˆç‡

## ä½¿ç”¨æµç¨‹

### 1. è¿è¡ŒRAGè¯„ä¼°
```bash
cd evalulate/

# å•ä¸ªé—®é¢˜è¯„ä¼°
python run.py --question_id <é—®é¢˜ID>

# æ‰¹é‡è¯„ä¼°
python run.py --batch

# æŒ‡å®šç­–ç•¥è¯„ä¼°
python run.py --strategy enhanced --batch
```

### 2. è¯„ä¼°ç»“æœåˆ†æ
```bash
# è¿è¡Œè¯„ä¼°è„šæœ¬
python eval.py

# æŸ¥çœ‹ç»“æœ
# æ•°å€¼ç»“æœ: ./results/based_on_rag/
# å¯è§†åŒ–å›¾è¡¨: ./results/charts/based_on_rag/
```

## ä¸»è¦åŠŸèƒ½æ¨¡å—

### RAGç³»ç»Ÿ (`rag/`)
- **å‘é‡æ•°æ®åº“æ„å»º**: å°†ä»£ç çŸ¥è¯†åº“è½¬æ¢ä¸ºå‘é‡è¡¨ç¤º
- **è¯­ä¹‰æ£€ç´¢**: åŸºäºé—®é¢˜æ£€ç´¢ç›¸å…³ä»£ç ç‰‡æ®µ
- **ä¸Šä¸‹æ–‡ç”Ÿæˆ**: ç”Ÿæˆå¢å¼ºçš„ä¸Šä¸‹æ–‡ä¿¡æ¯

### è¯„ä¼°ç³»ç»Ÿ (`evalulate/`)
- **é—®é¢˜å¤„ç†**: æ”¯æŒå•ä¸ªå’Œæ‰¹é‡é—®é¢˜è¯„ä¼°
- **å¤šç­–ç•¥æ”¯æŒ**: basicã€enhancedã€compressedä¸‰ç§ç­–ç•¥
- **æ€§èƒ½è¯„ä¼°**: å¤šç»´åº¦è¯„ä¼°æŒ‡æ ‡è®¡ç®—
- **ç»“æœå¯è§†åŒ–**: è‡ªåŠ¨ç”Ÿæˆè¯„ä¼°å›¾è¡¨

### è¾…åŠ©å·¥å…· (`scripts/`)
- **æ‰¹é‡å¤„ç†**: æ‰¹é‡ç”ŸæˆMarkdownæ–‡æ¡£
- **ä¿¡æ¯å¢å¼º**: æ·»åŠ Gitæäº¤ä¿¡æ¯ç­‰å…ƒæ•°æ®

## ä¾èµ–è¯´æ˜

ä¸»è¦ä¾èµ–åŒ…åŒ…æ‹¬ï¼š
- **LangChain**: LLMåº”ç”¨å¼€å‘æ¡†æ¶
- **ChromaDB**: å‘é‡æ•°æ®åº“
- **Sentence Transformers**: æ–‡æœ¬åµŒå…¥æ¨¡å‹
- **OpenAI**: GPTæ¨¡å‹API
- **Matplotlib/Seaborn**: æ•°æ®å¯è§†åŒ–
- **Scikit-learn**: æœºå™¨å­¦ä¹ è¯„ä¼°æŒ‡æ ‡

## æ³¨æ„äº‹é¡¹

1. ç¡®ä¿å·²æ­£ç¡®é…ç½®APIå¯†é’¥å’Œç¯å¢ƒå˜é‡
2. é¦–æ¬¡è¿è¡Œéœ€è¦ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹ï¼Œå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
3. å‘é‡æ•°æ®åº“æ„å»ºéœ€è¦è¾ƒå¤§å­˜å‚¨ç©ºé—´
4. å»ºè®®åœ¨GPUç¯å¢ƒä¸‹è¿è¡Œä»¥æé«˜å¤„ç†é€Ÿåº¦

## ç›¸å…³æ–‡æ¡£

- [RAGè¿è¡Œå™¨è¯¦ç»†è¯´æ˜](./evalulate/README_RAG_RUNNER.md)
- [å‘é‡æ•°æ®åº“æ„å»ºè¯´æ˜](./rag/README_build_vector_db.md)
- [è„šæœ¬å·¥å…·è¯´æ˜](./scripts/README.md)
